#!/bin/zsh
CUSTOMDIR=/custom
VIMDIR=${CUSTOMDIR}/dotfiles/vim
VIMBUNDLE=${VIMDIR}/bundle

install_js_modules () {
    yum makecache fast
    yum -y install nodejs npm ruby --enablerepo=epel
    npm install -g yo gulp bower generator-angular generator-gulp-angular 
    npm install -g webpack webpack-dev-server
    gem install sass
}

install_js_vim_config () {
    JSDIR=${CUSTOMDIR}/stevedore/modules/js
    if [ -e ${VIMDIR} ]; then
        if [ -e "${JSDIR}/.vimrc.before.local" ]; then
            cp ${JSDIR}/.vimrc.before.local ${VIMDIR}/
        fi
        if [ -e "${JSDIR}/.vimrc.local" ]; then
            cp ${JSDIR}/.vimrc.local ${VIMDIR}/
        fi
        if [ -e "${JSDIR}/.vimrc.bundles.local" ]; then
            cp ${JSDIR}/.vimrc.bundles.local ${VIMDIR}/
        fi
fi

}

install_bundle () {
    if [ -e ${CUSTOMDIR}/bin/vim ]; then
        echo installing bundle
        ${CUSTOMDIR}/bin/vim -e -s -u ${VIMDIR}/.vimrc +PluginInstall +qall
        echo Done installing bundle
    fi
}

main () {
    install_js_modules
    install_js_vim_config
    install_bundle
}

main
